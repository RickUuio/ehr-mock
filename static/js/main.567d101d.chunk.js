(this["webpackJsonpehr-mock"]=this["webpackJsonpehr-mock"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){},38:function(e,t,n){"use strict";n.r(t);var r=n(2),c=n.n(r),a=n(14),s=n.n(a),i=(n(30),n(19)),o=n(24),l=n(3),u=n.n(l),d=n(8),b=n(6),j=(n(32),n(13)),p=n(1),f=function(e){var t=e.patient;return Object(p.jsxs)("div",{className:"p-2",children:[Object(p.jsxs)("h4",{style:{color:"yellow"},children:[Object(p.jsx)(j.c,{})," ",t.firstName," ",t.lastName]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"DOB"})," : ",t.dob,Object(p.jsx)("span",{children:"    "}),Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"Gender"})," : ",t.gender]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"MRN"})," : ",t.mrn]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"FHIR ID"})," : ",t.fhirId]})]})},h=function(e){var t=e.provider;return Object(p.jsxs)("div",{className:"p-2",children:[Object(p.jsxs)("h4",{style:{color:"HotPink"},children:[t.firstName," ",t.lastName," ",Object(p.jsx)(j.d,{})]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"FHIR ID"})," : ",t.fhirId]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"UUID "})," : ",t.uuid]})]})},m=function(e){var t=e.profileName,n=e.switchProfile;return Object(p.jsxs)("div",{className:"btn-group mb-2",role:"group","aria-label":"Basic mixed styles example",children:[Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnradio",id:"profileEpic",autoComplete:"off",defaultChecked:"Epic"===t,onClick:function(){t="Epic",n("Epic")}}),Object(p.jsx)("label",{class:"btn btn-outline-danger",htmlFor:"profileEpic",children:"Epic AppOrchard"}),Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnradio",id:"profileLogica",autoComplete:"off",defaultChecked:"Logica"===t,onClick:function(){t="Logica",n("Logica")}}),Object(p.jsx)("label",{className:"btn btn-outline-info",htmlFor:"profileLogica",children:"Logica Health"})]})},v=function(e){var t=e.title,n=e.patient,r=e.provider,c=e.profileName,a=e.switchProfile;return Object(p.jsx)("header",{children:Object(p.jsx)("div",{id:"navbarTop",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-lg-6 col-md-12 order-lg-2",children:[Object(p.jsxs)("h2",{className:"pt-4",children:[Object(p.jsx)(j.b,{style:{color:"#d60c05ee"}})," ",t]}),Object(p.jsx)(m,{profileName:c,switchProfile:a})]}),Object(p.jsx)("div",{className:"col-lg-3 col-md-6 order-lg-1",children:Object(p.jsx)(f,{patient:n})}),Object(p.jsx)("div",{className:"col-lg-3 col-md-6 order-lg-3",children:Object(p.jsx)(h,{provider:r})})]})})})};v.defaultProps={title:"Mock EHR : : Social Care Referrals"};var x=v,O=n(20),g=function(e){var t=e.encounterList,n=e.currentEncounter,r=void 0===n?"smart-2":n,c=e.changeCurrentEncounter,a=e.refreshEncounters;return Object(p.jsxs)("div",{className:"encounter col-md-3 col-lg-2 mx-0 px-0",children:[Object(p.jsxs)("div",{className:"btn btn-default btn-lg btn-block table-hover mx-0",onClick:function(){console.log("Retrieving patient's encounters"),a()},children:["All Encounters",Object(p.jsx)("div",{className:"badge bg-primary mx-2",children:t.length}),Object(p.jsx)(O.a,{})]}),Object(p.jsx)("dl",{children:t.map((function(e,t){var n=e.resource.id===r,a=n?"row table-hover m-0 px-2 selected":"row table-hover m-0 px-2",s=n?"visible":"invisible";return Object(p.jsxs)("div",{className:a,onClick:function(){return t=e.resource.id,void c(t);var t},children:[Object(p.jsx)("dt",{children:Object(p.jsxs)("a",{href:e.fullUrl,children:[e.resource.id," ",Object(p.jsx)(j.a,{className:s})]})}),Object(p.jsxs)("dd",{children:[Object(p.jsx)("div",{children:e.resource.period.start.split("T")[0]}),Object(p.jsxs)("div",{children:[" ",e.resource.class.display]})]})]},t)}))})]})},y=function(e){var t=e.toggleShowNewReferral,n=e.showNewReferral,r=e.currentEncounter,c=e.sendNotificationUU,a=e.profileName,s=function(){t()};return Object(p.jsxs)("div",{className:"encounterSummary",children:[Object(p.jsxs)("div",{className:"h4 pt-2 d-inline-block",children:["Current Encounter: ",r]}),Object(p.jsx)("div",{className:"btn btn-primary d-inline float-end",onClick:function(){console.log("sending an encounter notification to Unite Us..."),c()},children:"Send Notification to Unite Us"}),n?Object(p.jsx)("div",{className:"btn btn-warning d-inline float-end",onClick:s,children:"Cancel New Referral"}):Object(p.jsx)("button",{className:"btn btn-primary d-inline float-end",onClick:s,disabled:"Epic"===a,children:"Create new referral"})]})},N=n(21),k=function(e){var t=e.onCreate,n=e.toggleShowNewReferral,c=Object(r.useState)(""),a=Object(b.a)(c,2),s=a[0],i=a[1],o=Object(r.useState)(""),l=Object(b.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)(""),f=Object(b.a)(j,2),h=f[0],m=f[1],v=Object(r.useState)(""),x=Object(b.a)(v,2),O=x[0],g=x[1],y=Object(r.useState)(""),k=Object(b.a)(y,2),w=k[0],C=k[1],T=Object(r.useState)(!1),S=Object(b.a)(T,2),R=S[0],E=S[1],I=function(e){e.preventDefault(),O?(t({serviceType:O,description:w,referredToGroupIds:s,referredFromGroupId:u,networkId:h,attachDocument:R}),i(""),d("demo-hospital"),m("demo-network"),g(""),C(""),E(!1)):alert("Please select a service for the referral!")};return Object(p.jsx)("div",{className:"newReferral",children:Object(p.jsxs)("form",{className:"add-form",onSubmit:I,children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-lg-6",children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"SENDING NETWORK"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"form-control",type:"text",placeholder:"Healthy Demo Network",readOnly:!0,value:h,onChange:function(e){return m(e.target.value)}})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"SENDER"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"form-control",type:"text",readOnly:!0,placeholder:"Local Hospital Center",value:u,onChange:function(e){return d(e.target.value)}})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"SERVICE TYPE"}),Object(p.jsx)("div",{children:Object(p.jsxs)("select",{className:"form-control",value:O.value,onChange:function(e){return g({value:e.target.value,text:e.target.options[e.target.selectedIndex].text})},children:[Object(p.jsx)("option",{children:"Select a service ..."}),Object(p.jsx)("option",{value:"f020d616-5016-4fb7-9fad-91d8d99cd7a1",children:"Emergency Food"}),Object(p.jsx)("option",{value:"f6760383-7fc4-442b-b686-fc5055bfec06",children:"Emergency Housing"})]})})]})]}),Object(p.jsxs)("div",{className:"col-lg-6",children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"RECEIVING NETWORK"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"form-control",type:"text",readOnly:!0,placeholder:"Healthy Demo Network",value:h,onChange:function(e){return m(e.target.value)}})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"RECEIPIENT"}),Object(p.jsx)("div",{children:Object(p.jsxs)("select",{className:"form-control",value:s.value,onChange:function(e){return i({value:e.target.value,text:e.target.options[e.target.selectedIndex].text})},children:[Object(p.jsx)("option",{children:"Select an organization ..."}),Object(p.jsx)("option",{value:"14742",children:"Housing California"}),Object(p.jsx)("option",{value:"14733",children:"River City Food Bank"})]})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"DESCRIPTION"}),Object(p.jsx)("div",{children:Object(p.jsx)("textarea",{className:"form-control",rows:"3",cols:"50",placeholder:"Enter a description for the referral",value:w,onChange:function(e){return C(e.target.value)}})})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("div",{className:"form-check form-switch mx-2 text-start",children:[Object(p.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:R,onChange:function(e){return E(e.target.checked)}}),Object(p.jsxs)("label",{className:"form-check-label",for:"flexSwitchCheckDefault",children:["Attach document to the communication ",Object(p.jsx)(N.a,{})]})]})})]})]}),Object(p.jsxs)("div",{className:"row d-inline",children:[Object(p.jsx)("input",{value:"Cancel",className:"btn btn-warning col-md-6 mt-4",onClick:function(){n()},readOnly:!0}),Object(p.jsx)("input",{value:"Submit",className:"btn btn-primary col-md-6 mt-4",onClick:I,readOnly:!0})]})]})})},w=n(10),C=n(41),T=n(42);var S=function(e){var t,n,c,a,s,i,o,l,u,d,j,f=e.referral,h=Object(r.useState)(!1),m=Object(b.a)(h,2),v=m[0],x=m[1],O=Object(r.useState)(),g=Object(b.a)(O,2),y=g[0],N=g[1],k=function(e){N(e),x(!0)},S=function(){return x(!1)},R=function(e){return e.identifier.find((function(e){return"HTTPS://UNITEUS.COM/IO/STRUCTUREDEFINITION/CBO-UUID"===e.system.toUpperCase()}))};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"row table-hover px-3",children:Object(p.jsx)("table",{className:"table table-sm align-middle text-start",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(f.ServiceRequest.resource)},children:[f.ServiceRequest.resource.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsxs)("td",{children:["Referral was authored on"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:f.ServiceRequest.resource.authoredOn})," ","by"," ",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){return k(f.Practitioner.resource)},children:[f.ServiceRequest.resource.requester.display," ",Object(p.jsx)(w.b,{})]}),"."," ",f.ServiceRequest.resource.orderDetail?Object(p.jsxs)("span",{children:["Service type is ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:f.ServiceRequest.resource.orderDetail[0].text}),"."]}):"Service type has not been confirmed yet.",f.ServiceRequest.resource.supportingInfo?Object(p.jsxs)("span",{children:[" ","Attached is a supporting document of",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){return k(f.DocumentReference[0])},children:[f.DocumentReference[0].type.text," ",Object(p.jsx)(w.b,{})]})]}):null]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(f.Task.resource)},children:[f.Task.resource.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["Referral status is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(t=f.Task)||void 0===t||null===(n=t.resource)||void 0===n?void 0:n.status}),", last modified on"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(c=f.Task)||void 0===c||null===(a=c.resource)||void 0===a?void 0:a.lastModified})]})," ",Object(p.jsxs)("span",{children:["Recipient is"," ",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){var e;return k(null===(e=f.Organization)||void 0===e?void 0:e.resource)},children:[null===(s=f.Task)||void 0===s||null===(i=s.resource)||void 0===i||null===(o=i.owner)||void 0===o?void 0:o.display," ",Object(p.jsx)(w.b,{})]})]})]})]}),f.Organization?Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(f.Organization.resource)},children:[f.Organization.resource.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["Recipient is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:f.Organization.resource.name})]}),R(f.Organization.resource)?Object(p.jsxs)("span",{children:["Their Unite Us UUID is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:R(f.Organization.resource).value})]}):null]})]}):null,f.Patient?Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(f.Patient.resource)},children:[f.Patient.resource.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"btn btn-outline-primary disabled",children:[f.Patient.resource.name[0].family,", ",f.Patient.resource.name[0].given[0]]})})]}):null,f.Practitioner?Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(f.Practitioner.resource)},children:[f.Practitioner.resource.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"btn btn-outline-primary disabled",children:[f.Practitioner.resource.name[0].family,", ",f.Practitioner.resource.name[0].given[0]]})})]}):null,null===(l=f.Consent)||void 0===l?void 0:l.map((function(e,t){var n,r,c,a,s;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(e.resource)},children:[e.resource.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("span",{children:["Consent status is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.resource.status}),". Scope is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(n=e.resource.scope)||void 0===n?void 0:n.text}),"."," ","Provision period is from",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(r=e.resource.provision)||void 0===r||null===(c=r.period)||void 0===c?void 0:c.start}),"to",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(a=e.resource.provision)||void 0===a||null===(s=a.period)||void 0===s?void 0:s.end})]})})]},t)})),null===(u=f.DocumentReference)||void 0===u?void 0:u.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(e)},children:[e.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("span",{children:["Document type is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.type.text}),". Document description is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.description})]})})]},t)})),null===(d=f.Binary)||void 0===d?void 0:d.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(e)},children:[e.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["Content type is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.contentType}),"."]})," ",Object(p.jsx)("div",{className:"btn btn-link",children:Object(p.jsxs)("a",{download:"Epic_CRN.pdf",href:"data:application/pdf;base64,".concat(e.data),title:"Download pdf document",children:["Click to download PDF file ",Object(p.jsx)(w.a,{})]})})]})]},t)})),null===(j=f.Communication)||void 0===j?void 0:j.map((function(e,t){var n,r,c,a;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return k(e.resource)},children:[e.resource.resourceType," ",Object(p.jsx)(w.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["On"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(n=e.resource)||void 0===n?void 0:n.sent}),", sent from"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(r=e.resource)||void 0===r?void 0:r.sender.display}),"to"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(c=e.resource)||void 0===c?void 0:c.recipient[0].display}),"."]}),e.resource.payload?Object(p.jsxs)("p",{children:[" ","Note message:"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.resource.payload[0].contentString})]}):Object(p.jsx)("span",{children:" Note message is empty."}),e.resource.payload&&(null===(a=e.resource.payload[1])||void 0===a?void 0:a.contentReference)?Object(p.jsxs)("p",{children:[" ","A"," ",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){return k(f.DocumentReference[0])},children:["document"," ",Object(p.jsx)(w.b,{})]})," ","was attached to the communication."]}):null]})]},t)}))]})})}),Object(p.jsxs)(C.a,{size:"lg",show:v,onHide:S,children:[Object(p.jsx)(C.a.Header,{closeButton:!0,children:Object(p.jsxs)(C.a.Title,{children:[null===y||void 0===y?void 0:y.resourceType," : ",null===y||void 0===y?void 0:y.id]})}),Object(p.jsx)(C.a.Body,{children:Object(p.jsx)("pre",{id:"json",children:JSON.stringify(y,void 0,2)})}),Object(p.jsx)(C.a.Footer,{children:Object(p.jsx)(T.a,{variant:"warning",onClick:S,children:"Close"})})]})]})};var R=function(e){var t=e.onCreate,n=e.referralList,c=e.currentEncounter,a=e.sendNotificationUU,s=e.profileName,i=Object(r.useState)(!1),o=Object(b.a)(i,2),l=o[0],u=o[1],d=function(){u((function(e){return!e}))};return Object(p.jsx)("div",{className:"col-md-9 col-lg-10 px-0",children:Object(p.jsxs)("div",{className:"referrals",children:[Object(p.jsx)(y,{toggleShowNewReferral:d,showNewReferral:l,currentEncounter:c,sendNotificationUU:a,profileName:s}),l?Object(p.jsx)(k,{onCreate:function(e){t(e),d()},toggleShowNewReferral:d}):null,Object(p.jsxs)("div",{className:"referralList",children:[Object(p.jsxs)("div",{className:"h5 py-3",children:["This encounter has ",n.length>1?n.length+" referrals.":1===n.length?" 1 referral.":" no referrals."]}),n.length>0?n.map((function(e,t){return Object(p.jsx)(S,{referral:e},t)})):null]})]})})},E={name:"Epic",defaultPatient:{firstName:"Calvin",lastName:"Ccm",gender:"Male",dob:"01/01/1940",mrn:"203722",fhirId:"e4ikKcC2Rp3EsZQh8Ac6C5A3",uuid:"b5318891-3dc8-426a-af50-531e106ad1a1"},defaultProvider:{firstName:"Case",lastName:"Manager",fhirId:"eaToFIkaJ32mO4K002q3BLw3",uuid:"94e5f7ee-1425-42bc-8833-3474b687b125",groupId:"bf4aa373-81eb-4da5-9980-2d3e51c57b3c",networkId:"145ca925-ba86-490d-b404-35f4fe5ada66"},defaultEncounter:"eFBT3k94CLm3fCPMNlKH2DQ3",defaultDocumentReference:"e.-1q0eXQDEZ.9mNdXwVjYA3",defaultBaseUrl:"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4",defaultNotificationUrl:"https://fhir-crn.uniteustraining.com/rick/FhirNotificationWebService",accessToken:"e2a4575581b3f57203e182b0b1f3dcea479baecd31bef125cc57f6dd4b8905ac"},I={name:"Logica",defaultPatient:{firstName:"Beverly",lastName:"Ccm",gender:"Female",dob:"01/01/1940",mrn:"203722",fhirId:"14730",uuid:"b5318891-3dc8-426a-af50-531e106ad1a1"},defaultProvider:{firstName:"Demo",lastName:"Provider",fhirId:"14734",uuid:"94e5f7ee-1425-42bc-8833-3474b687b125",groupId:"bf4aa373-81eb-4da5-9980-2d3e51c57b3c",networkId:"145ca925-ba86-490d-b404-35f4fe5ada66"},defaultEncounter:"14732",defaultDocumentReference:"14740",defaultBaseUrl:"https://api.logicahealth.org/uufhircrn/open",defaultNotificationUrl:"https://fhir-crn.uniteustraining.com/rick/FhirNotificationWebService",accessToken:""};var P=function(){var e=E,t=e.name,n=Object(r.useState)(t),c=Object(b.a)(n,2),a=c[0],s=c[1],l=Object(r.useState)(e.defaultPatient),j=Object(b.a)(l,2),f=j[0],h=j[1],m=Object(r.useState)(e.defaultProvider),v=Object(b.a)(m,2),O=v[0],y=v[1],N=Object(r.useState)(e.defaultEncounter),k=Object(b.a)(N,2),w=k[0],C=k[1],T=Object(r.useState)(e.access_token),S=Object(b.a)(T,2),P=S[0],D=S[1],U=Object(r.useState)(e.defaultBaseUrl),A=Object(b.a)(U,2),q=A[0],z=A[1],F=Object(r.useState)(e.defaultNotificationUrl),B=Object(b.a)(F,2),L=B[0],G=B[1],H=Object(r.useState)([]),J=Object(b.a)(H,2),M=J[0],_=J[1],K=Object(r.useState)([]),W=Object(b.a)(K,2),Q=W[0],V=W[1],X=Object(r.useState)(""),Y=Object(b.a)(X,2),Z=Y[0],$=Y[1],ee=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Switch to profile: ",t),s(t),h((n="Logica"===t?I:E).defaultPatient),y(n.defaultProvider),z(n.defaultBaseUrl),G(n.defaultNotificationUrl),"Epic"!==n.name){e.next=14;break}return e.next=10,je();case 10:r=e.sent,D(r),e.next=15;break;case 14:D(n.accessToken);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de(f.fhirId,q);case 2:if(!((null===(t=e.sent)||void 0===t?void 0:t.length)>0)){e.next=6;break}return e.next=6,le(t[0].resource.id,q);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,c,a,s,i,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("create referral: ",t),n=(new Date).toISOString(),r=q+"/ServiceRequest",c={resourceType:"ServiceRequest",status:"active",intent:"plan",category:[{coding:[{system:"http://snomed.info/sct",code:"307835004",display:"Referral by service"}],text:"Referral by service"}],priority:"routine",subject:{reference:"Patient/".concat(f.fhirId),display:f.lastName+", "+f.firstName},encounter:{reference:"Encounter/".concat(w)},authoredOn:n,requester:[{reference:"Practitioner/".concat(O.fhirId),display:O.firstName+" "+O.lastName}]},t.attachDocument&&Z.length>0&&(c.supportingInfo=[{reference:"DocumentReference/".concat(Z)}]),e.next=7,fetch(r,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 7:return a=e.sent,e.next=10,a.json();case 10:return s=e.sent,i=s.id,console.log("server request id: ",i),r=q+"/Task",c={resourceType:"Task",basedOn:[{reference:"ServiceRequest/".concat(i)}],status:"requested",intent:"plan",priority:"routine",for:{reference:"Patient/".concat(f.fhirId),display:f.lastName+", "+f.firstName},encounter:{reference:"Encounter/".concat(w)},authoredOn:n,lastModified:n,requester:[{reference:"Practitioner/".concat(O.fhirId),display:O.firstName+" "+O.lastName}],owner:{reference:"Organization/".concat(t.referredToGroupIds.value),display:t.referredToGroupIds.text}},e.next=17,fetch(r,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 17:return a=e.sent,e.next=20,a.json();case 20:return s=e.sent,l=s.id,console.log("Task id: ",l),r=q+"/Communication",c={resourceType:"Communication",basedOn:[{reference:"ServiceRequest/".concat(i)}],partOf:[{reference:"Task/".concat(l)}],status:"in-progress",subject:{reference:"Patient/".concat(f.fhirId),display:f.lastName+", "+f.firstName},encounter:{reference:"Encounter/".concat(w)},sent:n,recipient:[{reference:"Organization/".concat(t.referredToGroupIds.value),display:t.referredToGroupIds.text}],sender:{reference:"Practitioner/".concat(O.fhirId),display:O.firstName+" "+O.lastName}},t.description.length>0&&(c.payload=[{contentString:t.description}]),t.attachDocument&&Z.length>0&&(c.payload=[].concat(Object(o.a)(c.payload),[{contentReference:{reference:"DocumentReference/".concat(Z)}}])),e.next=29,fetch(r,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 29:return a=e.sent,e.next=32,a.json();case 32:return s=e.sent,d=s.id,console.log("Communication id: ",d),e.next=37,ue();case 37:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,c,a,s,i,o,l,d,b,j,p,f,h,m,v,x,O,g,y,N,k,C,T=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:w,n=T.length>1&&void 0!==T[1]?T[1]:q,r=n+"/Task?encounter="+t+"&_include=Task%3Apatient&_include=Task%3Aencounter&_include=Task%3Arequester&_include=Task%3Abased-on&_include=Task%3Aowner%3AOrganization",e.next=5,fetch(r,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===P||void 0===P?void 0:P.length)>0?"bearer "+P:""}});case 5:return c=e.sent,e.next=8,c.json();case 8:if(a=e.sent,s=0===a.total?[]:a.entry){e.next=12;break}return e.abrupt("return",[]);case 12:console.log("Task bundle received: ",s),i=[],s.forEach((function(e,t){if("Task"===e.resource.resourceType){var n={id:"Task/"+e.resource.id,Task:e};i.push(n)}})),i.forEach((function(e,t){var n,r,c,a,i=null===e||void 0===e||null===(n=e.Task)||void 0===n?void 0:n.resource;if(i){var o=null===(r=i.for)||void 0===r?void 0:r.reference,l=i.basedOn[0].reference,u=null===(c=i.requester)||void 0===c?void 0:c.reference,d=null===(a=i.owner)||void 0===a?void 0:a.reference;s.forEach((function(t,n){var r=t.resource.id;switch(t.resource.resourceType){case"ServiceRequest":l==="ServiceRequest/".concat(r)&&(e.ServiceRequest=t);break;case"Patient":o==="Patient/".concat(r)&&(e.Patient=t);break;case"Organization":d==="Organization/".concat(r)&&(e.Organization=t);break;case"Practitioner":u==="Practitioner/".concat(r)&&(e.Practitioner=t)}}))}})),o=0,l=i;case 17:if(!(o<l.length)){e.next=27;break}return j=l[o],p=null===j||void 0===j||null===(d=j.Task)||void 0===d||null===(b=d.resource)||void 0===b?void 0:b.id,e.next=22,ae(p);case 22:f=e.sent,j.Communication=f.entry;case 24:o++,e.next=17;break;case 27:h=0,m=i;case 28:if(!(h<m.length)){e.next=37;break}return v=m[h],e.next=32,se(v);case 32:(null===(x=e.sent)||void 0===x?void 0:x.length)>0&&(v.DocumentReference=x,$(v.DocumentReference[0].id),console.log("documentReference",v.DocumentReference),console.log("sampleDocumentReference",Z));case 34:h++,e.next=28;break;case 37:O=0,g=i;case 38:if(!(O<g.length)){e.next=48;break}if(N=g[O],!((null===(y=N.DocumentReference)||void 0===y?void 0:y.length)>0)){e.next=45;break}return e.next=43,ie(N.DocumentReference);case 43:(null===(k=e.sent)||void 0===k?void 0:k.length)>0&&(N.Binary=k);case 45:O++,e.next=38;break;case 48:return e.next=50,oe();case 50:return(null===(C=e.sent)||void 0===C?void 0:C.length)>0&&i.forEach((function(e,t){e.Consent=C})),console.log("referral list",i),i.sort((function(e,t){var n=new Date(e.ServiceRequest.resource.authoredOn).getTime();return new Date(t.ServiceRequest.resource.authoredOn).getTime()-n})),e.abrupt("return",i);case 55:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,c,s,i,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:f.fhirId,n=o.length>1&&void 0!==o[1]?o[1]:q,r=n+"/Encounter?patient="+t,e.next=5,fetch(r,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===P||void 0===P?void 0:P.length)>0&&"Epic"===a?"bearer "+P:""}});case 5:return c=e.sent,e.next=8,c.json();case 8:return s=e.sent,(i=s.total>0?s.entry:[]).sort((function(e,t){var n=new Date(e.resource.period.start).getTime();return new Date(t.resource.period.start).getTime()-n})),console.log("encounter",i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q+"/Communication?part-of="+t,e.next=3,fetch(n,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===P||void 0===P?void 0:P.length)>0?"bearer "+P:""}});case 3:return r=e.sent,e.next=6,r.json();case 6:return c=e.sent,console.log("communications: ",c),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,c,a,s,o,l,d,b,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],a=null===t||void 0===t||null===(n=t.ServiceRequest)||void 0===n||null===(r=n.resource)||void 0===r?void 0:r.supportingInfo){e.next=4;break}return e.abrupt("return",c);case 4:s=Object(i.a)(a),e.prev=5,s.s();case 7:if((o=s.n()).done){e.next=20;break}return l=o.value,d=q+"/"+l.reference,e.next=12,fetch(d,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===P||void 0===P?void 0:P.length)>0?"bearer "+P:""}});case 12:return b=e.sent,e.next=15,b.json();case 15:j=e.sent,console.log("documentReference: ",j),"DocumentReference"===(null===j||void 0===j?void 0:j.resourceType)&&c.push(j);case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return e.abrupt("return",c);case 29:case"end":return e.stop()}}),e,null,[[5,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,c,a,s,o,l,d,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t){e.next=3;break}return e.abrupt("return",n);case 3:r=Object(i.a)(t),e.prev=4,r.s();case 6:if((c=r.n()).done){e.next=18;break}return o=c.value,l=q+"/"+(null===(a=o.content[0])||void 0===a||null===(s=a.attachment)||void 0===s?void 0:s.url),e.next=11,fetch(l,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/fhir+json",Authorization:(null===P||void 0===P?void 0:P.length)>0?"bearer "+P:""}});case 11:return d=e.sent,e.next=14,d.json();case 14:"Binary"===(null===(b=e.sent)||void 0===b?void 0:b.resourceType)&&({resourceType:"Binary",id:b.id,contentType:b.contentType},n.push(b));case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:return e.abrupt("return",n);case 27:case"end":return e.stop()}}),e,null,[[4,20,23,26]])})));return function(t){return e.apply(this,arguments)}}(),oe=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,c,s,i,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:f.fhirId,n=o.length>1&&void 0!==o[1]?o[1]:"Epic"===a?"http://loinc.org|64292-6":"64292-6",r=o.length>2&&void 0!==o[2]?o[2]:"active",c="".concat(q,"/Consent?patient=").concat(t,"&category=").concat(n,"&status=").concat(r),e.next=6,fetch(c,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===P||void 0===P?void 0:P.length)>0?"bearer "+P:""}});case 6:return s=e.sent,e.next=9,s.json();case 9:return i=e.sent,console.log("consent: ",i),e.abrupt("return",i.entry);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),le=function(){var e=Object(d.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(t),e.next=3,ue(t,n);case 3:return e.abrupt("return");case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ue=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t,n);case 2:r=e.sent,_(r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),de=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t,n);case 2:return r=e.sent,V(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),be=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=L,n={resourceType:"Bundle",type:"Event",entry:[{fullUrl:q+"/Encounter/"+w}]},e.next=4,fetch(t,{method:"POST",headers:{"Content-type":"application/json","x-api-key":"sfsdfddfdsfsdfs32342343"},body:JSON.stringify(n)});case 4:return r=e.sent,e.next=7,r.json();case 7:return c=e.sent,console.log("notification response: ",c),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://5yhugddpmk.execute-api.us-east-1.amazonaws.com/rick/mockapi/authentication/token",e.next=3,fetch("https://5yhugddpmk.execute-api.us-east-1.amazonaws.com/rick/mockapi/authentication/token",{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json","x-api-key":"sfsdfddfdsfsdfs32342343","Access-Control-Allow-Origin":"*"},body:JSON.stringify({privateKey:null})});case 3:return t=e.sent,e.next=6,t.json();case 6:return n=e.sent,r=n.body.access_token,console.log("access token ",r),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t)}),[]),Object(r.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,te();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[P]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(x,{patient:f,provider:O,profileName:a,switchProfile:ee}),Object(p.jsxs)("div",{className:"row mt-1 mx-0",children:[Object(p.jsx)(g,{encounterList:Q,currentEncounter:w,changeCurrentEncounter:le,refreshEncounters:de}),Object(p.jsx)(R,{onCreate:ne,referralList:M,currentEncounter:w,sendNotificationUU:be,profileName:a})]})]})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};n(37);s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(P,{})}),document.getElementById("root")),D()}},[[38,1,2]]]);
//# sourceMappingURL=main.567d101d.chunk.js.map