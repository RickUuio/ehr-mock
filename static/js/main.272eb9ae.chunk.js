(this["webpackJsonpehr-mock"]=this["webpackJsonpehr-mock"]||[]).push([[0],{32:function(e,t,r){},34:function(e,t,r){},40:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r.n(n),a=r(14),s=r.n(a),i=(r(32),r(19)),o=r(25),l=r(4),d=r.n(l),u=r(8),b=r(3),j=(r(34),r(10)),p=r(1),h=function(e){var t=e.patient;return Object(p.jsxs)("div",{className:"p-2",children:[Object(p.jsxs)("h4",{style:{color:"yellow"},children:[Object(p.jsx)(j.f,{}),t.firstName," ",t.lastName]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"DOB"})," : ",t.dob,Object(p.jsx)("span",{children:"    "}),Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"Gender"})," : ",t.gender]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"MRN"})," : ",t.mrn]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"FHIR ID"})," : ",t.fhirId]})]})},f=function(e){var t=e.provider;return Object(p.jsxs)("div",{className:"p-2",children:[Object(p.jsxs)("h4",{style:{color:"HotPink"},children:[t.firstName," ",t.lastName," ",Object(p.jsx)(j.g,{})]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"FHIR ID"})," : ",t.fhirId]}),Object(p.jsxs)("h6",{children:[Object(p.jsx)("span",{className:"badge bg-light text-dark",children:"UUID "})," : ",t.uuid]})]})},m=function(e){var t=e.profileName,r=e.switchProfile;return Object(p.jsxs)("div",{className:"btn-group mb-2",role:"group","aria-label":"Profile selector",id:"profileGroup",children:[Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnProfile",id:"profileEpic",autoComplete:"off",defaultChecked:"Epic"===t,onClick:function(){t="Epic",r("Epic")}}),Object(p.jsx)("label",{class:"btn btn-outline-danger",htmlFor:"profileEpic",children:"Calvin @Epic"}),Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnProfile",id:"profileEpic2",autoComplete:"off",defaultChecked:"Epic2"===t,onClick:function(){t="Epic2",r("Epic2")}}),Object(p.jsx)("label",{class:"btn btn-outline-danger",htmlFor:"profileEpic2",children:"Beverly @Epic"}),Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnProfile",id:"profileLogica",autoComplete:"off",defaultChecked:"Logica"===t,onClick:function(){t="Logica",r("Logica")}}),Object(p.jsx)("label",{className:"btn btn-outline-info",htmlFor:"profileLogica",children:"Beverly @Logica"})]})},O=function(e){var t=e.title,r=e.patient,n=e.provider,c=e.profileName,a=e.switchProfile;return Object(p.jsx)("header",{children:Object(p.jsx)("div",{id:"navbarTop",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-lg-6 col-md-12 order-lg-2",children:[Object(p.jsxs)("h2",{className:"pt-4",children:[Object(p.jsx)(j.d,{style:{color:"#d60c05ee"}})," ",t]}),Object(p.jsx)(m,{profileName:c,switchProfile:a})]}),Object(p.jsx)("div",{className:"col-lg-3 col-md-6 order-lg-1",children:Object(p.jsx)(h,{patient:r})}),Object(p.jsx)("div",{className:"col-lg-3 col-md-6 order-lg-3",children:Object(p.jsx)(f,{provider:n})})]})})})};O.defaultProps={title:"Mock EHR : : Social Care Referrals"};var x=O,v=r(21),g=function(e){var t=e.encounterList,r=e.currentEncounter,n=void 0===r?"smart-2":r,c=e.changeCurrentEncounter,a=e.refreshEncounters;return Object(p.jsxs)("div",{className:"encounter col-md-3 col-lg-2 mx-0 px-0",children:[Object(p.jsxs)("div",{className:"btn btn-default btn-lg btn-block table-hover mx-0",onClick:function(){console.log("Retrieving patient's encounters"),a()},children:["All Encounters",Object(p.jsx)("div",{className:"badge bg-primary mx-2",children:t.length}),Object(p.jsx)(v.a,{})]}),Object(p.jsx)("dl",{children:t.map((function(e,t){var r=e.resource.id===n,a=r?"row list-hover m-0 px-2 text-break selected":"row list-hover m-0 px-2 text-break",s=r?"visible":"invisible";return Object(p.jsxs)("div",{className:a,onClick:function(){return t=e.resource.id,void c(t);var t},children:[Object(p.jsx)("dt",{children:Object(p.jsxs)("a",{href:e.fullUrl,children:[e.resource.id," ",Object(p.jsx)(j.b,{className:s})]})}),Object(p.jsxs)("dd",{children:[Object(p.jsx)("div",{children:e.resource.period.start.split("T")[0]}),Object(p.jsxs)("div",{children:[" ",e.resource.class.display]})]})]},t)}))})]})},N=function(e){var t=e.toggleShowNewReferral,r=e.showNewReferral,n=e.currentEncounter,c=e.sendNotificationUU,a=e.profileName,s=function(){t()};return Object(p.jsx)("div",{className:"encounterSummary",children:Object(p.jsxs)("div",{className:"row pt-2 row-cols-1 row-cols-lg-3",children:[Object(p.jsx)("div",{className:"col mx-auto text-break",children:Object(p.jsxs)("h4",{children:["Current Encounter: ",n]})}),Object(p.jsx)("div",{className:"col",children:r?Object(p.jsx)("button",{className:"btn btn-warning btn-block col mx-1",onClick:s,children:"Cancel New Referral"}):Object(p.jsx)("button",{className:"btn btn-primary btn-block mx-1",onClick:s,disabled:"Epic"===a,children:"Create New Referral"})}),Object(p.jsx)("div",{className:"col",children:Object(p.jsx)("button",{className:"btn btn-primary btn-block col mx-1",onClick:function(){console.log("sending an encounter notification to Unite Us..."),c()},children:"Send Notification to Unite Us"})})]})})},y=r(22),k=function(e){var t=e.onCreate,r=e.toggleShowNewReferral,c=Object(n.useState)(""),a=Object(b.a)(c,2),s=a[0],i=a[1],o=Object(n.useState)(""),l=Object(b.a)(o,2),d=l[0],u=l[1],j=Object(n.useState)(""),h=Object(b.a)(j,2),f=h[0],m=h[1],O=Object(n.useState)(""),x=Object(b.a)(O,2),v=x[0],g=x[1],N=Object(n.useState)(""),k=Object(b.a)(N,2),S=k[0],C=k[1],w=Object(n.useState)(!1),R=Object(b.a)(w,2),T=R[0],E=R[1],I=function(e){e.preventDefault(),v?(t({serviceType:v,description:S,referredToGroupIds:s,referredFromGroupId:d,networkId:f,attachDocument:T}),i(""),u("demo-hospital"),m("demo-network"),g(""),C(""),E(!1)):alert("Please select a service for the referral!")};return Object(p.jsx)("div",{className:"newReferral",children:Object(p.jsxs)("form",{className:"add-form",onSubmit:I,children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-lg-6",children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"SENDING NETWORK"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"form-select",type:"text",placeholder:"Healthy Demo Network",readOnly:!0,disabled:!0,value:f,onChange:function(e){return m(e.target.value)}})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"RECEIVING NETWORK"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"form-select",type:"text",readOnly:!0,disabled:!0,placeholder:"Healthy Demo Network",value:f,onChange:function(e){return m(e.target.value)}})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"SENDER"}),Object(p.jsx)("div",{children:Object(p.jsx)("input",{className:"form-select",type:"text",readOnly:!0,disabled:!0,placeholder:"Local Hospital Center",value:d,onChange:function(e){return u(e.target.value)}})})]})]}),Object(p.jsxs)("div",{className:"col-lg-6",children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"SERVICE TYPE"}),Object(p.jsx)("div",{children:Object(p.jsxs)("select",{className:"form-select",value:v.value,onChange:function(e){return g({value:e.target.value,text:e.target.options[e.target.selectedIndex].text})},children:[Object(p.jsx)("option",{children:"Select a service ..."}),Object(p.jsx)("option",{value:"f020d616-5016-4fb7-9fad-91d8d99cd7a1",children:"Emergency Food"}),Object(p.jsx)("option",{value:"f6760383-7fc4-442b-b686-fc5055bfec06",children:"Emergency Housing"})]})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"RECEIPIENT"}),Object(p.jsx)("div",{children:Object(p.jsxs)("select",{className:"form-select",value:s.value,onChange:function(e){return i({value:e.target.value,text:e.target.options[e.target.selectedIndex].text})},children:[Object(p.jsx)("option",{children:"Select an organization ..."}),Object(p.jsx)("option",{value:"14742",children:"Housing California"}),Object(p.jsx)("option",{value:"14733",children:"River City Food Bank"})]})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"INITIAL COMMUNICATION"}),Object(p.jsx)("div",{children:Object(p.jsx)("textarea",{className:"form-control",rows:"3",cols:"50",placeholder:"Enter a description for the referral",value:S,onChange:function(e){return C(e.target.value)}})})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsxs)("div",{className:"form-check form-switch mx-2 text-start",children:[Object(p.jsx)("input",{className:"form-check-input",type:"checkbox",id:"flexSwitchCheckDefault",checked:T,onChange:function(e){return E(e.target.checked)}}),Object(p.jsxs)("label",{className:"form-check-label",for:"flexSwitchCheckDefault",children:["Attach document to the communication"," ",Object(p.jsx)(y.a,{})]})]})})]})]}),Object(p.jsxs)("div",{className:"row d-inline",children:[Object(p.jsx)("input",{value:"Cancel",className:"btn btn-warning col-md-6 mt-4",onClick:function(){r()},readOnly:!0}),Object(p.jsx)("input",{value:"Submit",className:"btn btn-primary col-md-6 mt-4",onClick:I,readOnly:!0})]})]})})},S=r(11),C=r(20);var w=function(e){var t,r,c,a,s,i,o,l,d,u,h,f,m,O,x,v,g,N,y=e.referral,k=e.showFhirSource,w=e.editReferralStatus,R=Object(n.useState)(""),T=Object(b.a)(R,2),E=T[0],I=T[1],P=function(e){k(e,!0)},D=function(e){return e.identifier.find((function(e){return"HTTPS://UNITEUS.COM/IO/STRUCTUREDEFINITION/CBO-UUID"===e.system.toUpperCase()}))},q=function(e){return E===e};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("tr",{className:"align-middle table-"+function(e){switch(e){case"accepted":return"primary";case"in-progress":return"info";case"rejected":case"failed":return"danger";case"completed":return"success";case"cancelled":return"danger";default:return"light"}}(null===(t=y.Task)||void 0===t||null===(r=t.resource)||void 0===r?void 0:r.status),"data-bs-toggle":"collapse","data-bs-target":"#referral"+y.ServiceRequest.resource.id,"aria-expanded":"false","aria-controls":"referral"+y.ServiceRequest.resource.id,children:[Object(p.jsx)("td",{children:y.ServiceRequest.resource.authoredOn}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"btn btn-outline-primary my-0",onClick:function(){var e,t,r,n,c,a;return c=null===(e=y.Task)||void 0===e||null===(t=e.resource)||void 0===t?void 0:t.id,a=null===(r=y.Task)||void 0===r||null===(n=r.resource)||void 0===n?void 0:n.status,void w(c,a)},children:[null===(c=y.Task)||void 0===c||null===(a=c.resource)||void 0===a?void 0:a.status,"  ",Object(p.jsx)(j.c,{})]})}),Object(p.jsx)("td",{children:y.ServiceRequest.resource.orderDetail?y.ServiceRequest.resource.orderDetail[0].text:"Not Confirmed"}),Object(p.jsx)("td",{children:null===(s=y.Task)||void 0===s||null===(i=s.resource)||void 0===i||null===(o=i.owner)||void 0===o?void 0:o.display}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"form-check form-switch mx-2 text-start",children:[Object(p.jsx)("input",{className:"form-check-input",type:"checkbox",role:"button",id:"flexSwitchCheck"+y.ServiceRequest.resource.id,checked:q(y.ServiceRequest.resource.id),onChange:function(){return e=y.ServiceRequest.resource.id,void I(E===e?"":e);var e}}),Object(p.jsxs)("label",{className:"form-check-label",role:"button",for:"flexSwitchCheck"+y.ServiceRequest.resource.id,children:["Fhir Resources"," ",q(y.ServiceRequest.resource.id)?Object(p.jsx)(C.a,{}):Object(p.jsx)(C.b,{})]})]})})]}),Object(p.jsx)("tr",{className:q(y.ServiceRequest.resource.id)?"table-light":"collapse",id:"referral"+y.ServiceRequest.resource.id,children:Object(p.jsx)("td",{colspan:"5",children:Object(p.jsx)("div",{className:"row px-3",children:Object(p.jsx)("table",{className:"table table-sm align-middle text-start",children:Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(y.ServiceRequest.resource)},children:[y.ServiceRequest.resource.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsxs)("td",{children:["Referral was authored on"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:y.ServiceRequest.resource.authoredOn})," ","by"," ",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){return P(y.Practitioner.resource)},children:[y.ServiceRequest.resource.requester.display," ",Object(p.jsx)(S.b,{})]}),"."," ",y.ServiceRequest.resource.orderDetail?Object(p.jsxs)("span",{children:["Service type is ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:y.ServiceRequest.resource.orderDetail[0].text}),"."]}):"Service type has not been confirmed yet.",y.ServiceRequest.resource.supportingInfo?Object(p.jsxs)("span",{children:[" ","Attached is a supporting document of",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){return P(y.DocumentReference[0])},children:[y.DocumentReference[0].type.text," ",Object(p.jsx)(S.b,{})]})]}):null]})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(y.Task.resource)},children:[y.Task.resource.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["Referral status is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(l=y.Task)||void 0===l||null===(d=l.resource)||void 0===d?void 0:d.status}),", last modified on"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(u=y.Task)||void 0===u||null===(h=u.resource)||void 0===h?void 0:h.lastModified})]})," ",Object(p.jsxs)("span",{children:["Recipient is"," ",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){var e;return P(null===(e=y.Organization)||void 0===e?void 0:e.resource)},children:[null===(f=y.Task)||void 0===f||null===(m=f.resource)||void 0===m||null===(O=m.owner)||void 0===O?void 0:O.display," ",Object(p.jsx)(S.b,{})]})]})]})]}),y.Organization?Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(y.Organization.resource)},children:[y.Organization.resource.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["Recipient is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:y.Organization.resource.name})]}),D(y.Organization.resource)?Object(p.jsxs)("span",{children:["Their Unite Us UUID is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:D(y.Organization.resource).value})]}):null]})]}):null,y.Patient?Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(y.Patient.resource)},children:[y.Patient.resource.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"btn btn-outline-primary disabled",children:[y.Patient.resource.name[0].family,","," ",y.Patient.resource.name[0].given[0]]})})]}):null,y.Practitioner?Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(y.Practitioner.resource)},children:[y.Practitioner.resource.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"btn btn-outline-primary disabled",children:[y.Practitioner.resource.name[0].family,","," ",y.Practitioner.resource.name[0].given[0]]})})]}):null,null===(x=y.Consent)||void 0===x?void 0:x.map((function(e,t){var r,n,c,a,s;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(e.resource)},children:[e.resource.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("span",{children:["Consent status is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.resource.status}),". Scope is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(r=e.resource.scope)||void 0===r?void 0:r.text}),". Provision period is from",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(n=e.resource.provision)||void 0===n||null===(c=n.period)||void 0===c?void 0:c.start}),"to",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(a=e.resource.provision)||void 0===a||null===(s=a.period)||void 0===s?void 0:s.end})]})})]},t)})),null===(v=y.DocumentReference)||void 0===v?void 0:v.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(e)},children:[e.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("span",{children:["Document type is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.type.text}),". Document description is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.description})]})})]},t)})),null===(g=y.Binary)||void 0===g?void 0:g.map((function(e,t){return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(e)},children:[e.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["Content type is"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.contentType}),"."]})," ",Object(p.jsx)("div",{className:"btn btn-link",children:Object(p.jsxs)("a",{download:"Epic_CRN.pdf",href:"data:application/pdf;base64,".concat(e.data),title:"Download pdf document",children:["Click to download PDF file ",Object(p.jsx)(S.a,{})]})})]})]},t)})),null===(N=y.Communication)||void 0===N?void 0:N.map((function(e,t){var r,n,c,a;return Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{scoope:"row",children:Object(p.jsxs)("button",{type:"button",className:"btn btn-link",onClick:function(){return P(e.resource)},children:[e.resource.resourceType," ",Object(p.jsx)(S.b,{})]})}),Object(p.jsxs)("td",{children:[Object(p.jsxs)("span",{children:["On"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(r=e.resource)||void 0===r?void 0:r.sent}),", sent from"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(n=e.resource)||void 0===n?void 0:n.sender.display}),"to"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:null===(c=e.resource)||void 0===c?void 0:c.recipient[0].display}),"."]}),e.resource.payload?Object(p.jsxs)("p",{children:[" ","Note message:"," ",Object(p.jsx)("div",{className:"btn btn-outline-primary disabled",children:e.resource.payload[0].contentString})]}):Object(p.jsx)("span",{children:" Note message is empty."}),e.resource.payload&&(null===(a=e.resource.payload[1])||void 0===a?void 0:a.contentReference)?Object(p.jsxs)("p",{children:[" ","A"," ",Object(p.jsxs)("div",{className:"btn btn-outline-primary",onClick:function(){return P(y.DocumentReference[0])},children:["document ",Object(p.jsx)(S.b,{})]})," ","was attached to the communication."]}):null]})]},t)}))]})})})})})]})},R=r(42),T=r(43),E=function(e){var t=e.showReferralStatus,r=e.currentReferralStatus,c=e.closeReferralStatusEdit,a=e.profileName,s=Object(n.useState)(r),i=Object(b.a)(s,2),o=i[0],l=i[1],d=Object(n.useState)({value:"Please select a reason ..."}),u=Object(b.a)(d,2),h=u[0],f=u[1],m=Object(n.useState)(""),O=Object(b.a)(m,2),x=O[0],v=O[1],g=function(){l(r),f({value:"Please select a reason ..."}),v(""),c(null)},N=function(e){console.log("new status is: ",e),l(e)},y=function(e){if("Logica"===a)return!0;switch(e){case"accepted":case"rejected":return"requested"===r||"in-progress"===r||"accepted"===r||""===r;case"completed":case"failed":return"in-progress"===r;default:return!1}},k=function(e){switch(e){case"accepted":return"primary";case"in-progress":return"info";case"rejected":case"failed":return"danger";case"completed":return"success";case"cancelled":return"danger";default:return"dark"}};return Object(p.jsxs)(R.a,{id:"referralStatus",size:"lg",show:t,onHide:g,children:[Object(p.jsx)(R.a.Header,{className:"bg-light",children:Object(p.jsx)(R.a.Title,{children:"Update Referral Status"})}),Object(p.jsxs)(R.a.Body,{children:[Object(p.jsxs)("div",{className:"row my-3 text-center",children:[Object(p.jsxs)("div",{className:"col-6",children:["Current Stauts: ",Object(p.jsx)("div",{className:"btn btn-outline-"+k(r),children:r})]}),Object(p.jsxs)("div",{className:"col-6",children:["New Status    : ",Object(p.jsx)("div",{className:"btn active btn-outline-"+k(o),children:o})]})]}),Object(p.jsx)("div",{className:"btn-group mb-2 text-center container-fluid",role:"group","aria-label":"Referral status selector",id:"statusGroup",children:Object(p.jsxs)("table",{className:"table table-bordered table-sm",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsxs)("th",{class:"table-light",children:["INITIATE ",Object(p.jsx)(j.a,{})]}),Object(p.jsxs)("th",{children:["RESPONSE ",Object(p.jsx)(j.a,{})]}),Object(p.jsxs)("th",{class:"table-light",children:["CONFIRM ",Object(p.jsx)(j.a,{})]}),Object(p.jsxs)("th",{children:["RESOLVE ",Object(p.jsx)(j.e,{})]})]})}),Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{rowSpan:"3",className:"table-light",children:Object(p.jsxs)("div",{className:"d-grid gap-2",children:[Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnStatus",id:"statusRequested",autoComplete:"off",value:"requested",defaultChecked:"requested"===r,onClick:function(e){N(e.target.value)},disabled:!y("requested")}),Object(p.jsx)("label",{class:"btn btn-outline-dark",htmlFor:"statusRequested",children:"requested"})]})}),Object(p.jsx)("td",{colSpan:"3",className:"table-light",children:Object(p.jsxs)("div",{className:"d-grid gap-2",children:[Object(p.jsx)("input",{type:"radio",className:"btn-check btn-block",name:"btnStatus",id:"statusCancelled",autoComplete:"off",value:"cancelled",defaultChecked:"cancelled"===r,onClick:function(e){N(e.target.value)},disabled:!y("cancelled")}),Object(p.jsx)("label",{class:"btn btn-outline-danger",htmlFor:"statusCancelled",children:"cancelled"})]})})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"d-grid gap-2",children:[Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnStatus",id:"statusAccepted",autoComplete:"off",value:"accepted",defaultChecked:"accepted"===r,onClick:function(e){N(e.target.value)},disabled:!y("accepted")}),Object(p.jsx)("label",{class:"btn btn-outline-primary",htmlFor:"statusAccepted",children:"accepted"})]})}),Object(p.jsx)("td",{className:"table-light",children:Object(p.jsxs)("div",{className:"d-grid gap-2",children:[Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnStatus",id:"statusInProgress",autoComplete:"off",value:"in-progress",defaultChecked:"in-progress"===r,onClick:function(e){N(e.target.value)},disabled:!y("in-progress")}),Object(p.jsx)("label",{class:"btn btn-outline-info",htmlFor:"statusInProgress",children:"in-progress"})]})}),Object(p.jsx)("td",{children:Object(p.jsxs)("div",{className:"d-grid gap-2",children:[Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnStatus",id:"statusCompleted",autoComplete:"off",value:"completed",defaultChecked:"completed"===r,onClick:function(e){N(e.target.value)},disabled:!y("completed")}),Object(p.jsx)("label",{class:"btn btn-outline-success",htmlFor:"statusCompleted",children:"completed"}),Object(p.jsx)("input",{type:"radio",className:"btn-check",name:"btnStatus",id:"statusFailed",autoComplete:"off",value:"failed",defaultChecked:"failed"===r,onClick:function(e){N(e.target.value)},disabled:!y("failed")}),Object(p.jsx)("label",{class:"btn btn-outline-danger",htmlFor:"statusFailed",children:"failed"})]})})]}),Object(p.jsx)("tr",{children:Object(p.jsx)("td",{colspan:"3",children:Object(p.jsxs)("div",{className:"d-grid gap-2",children:[Object(p.jsx)("input",{type:"radio",className:"btn btn-sm btn-check",name:"btnStatus",id:"statusRejected",autoComplete:"off",value:"rejected",onClick:function(e){N(e.target.value)},defaultChecked:"rejected"===r,disabled:!y("rejected")}),Object(p.jsx)("label",{class:"btn btn-outline-danger",htmlFor:"statusRejected",children:"rejected"}),Object(p.jsxs)("div",{className:"rejected"===o?"":"d-none",children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"REJECT REASON"}),Object(p.jsx)("div",{children:Object(p.jsxs)("select",{className:"form-select",value:h.value,onChange:function(e){return f({value:e.target.value,text:e.target.options[e.target.selectedIndex].text})},children:[Object(p.jsx)("option",{children:"Select a reason ..."}),[{display_name:"Not Eligible",value:"Client is not eligible for our services"},{display_name:"Duplicate",value:"Duplicate, case already exists in the system"},{display_name:"No Capacity",value:"We do not have capacity to serve client"},{display_name:"Do Not Provide Service",value:"We do not provide the services requested/needed"},{display_name:"Unable to Contact Client",value:"We were unable to contact the client"},{display_name:"Other",value:"Other"}].map((function(e){return Object(p.jsx)("option",{value:e.value,children:e.display_name})}))]})})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"col-form-label",children:"NOTE"}),Object(p.jsx)("div",{children:Object(p.jsx)("textarea",{className:"form-control",rows:"3",cols:"50",placeholder:"Enter a note for the reject reason",value:x,onChange:function(e){return v(e.target.value)}})})]})]})]})})})]})]})})]}),Object(p.jsxs)(R.a.Footer,{children:[Object(p.jsx)(T.a,{variant:"warning",onClick:g,children:"Cancel"}),Object(p.jsx)(T.a,{variant:"primary",onClick:function(){l(o),c({value:o,rejectReason:{reason:h,note:x}})},children:"Submit"})]})]})};var I=function(e){var t=e.onCreate,r=e.referralList,c=e.currentEncounter,a=e.sendNotificationUU,s=e.profileName,i=e.updateReferralStatus,o=Object(n.useState)(!1),l=Object(b.a)(o,2),d=l[0],u=l[1],j=Object(n.useState)(!1),h=Object(b.a)(j,2),f=h[0],m=h[1],O=Object(n.useState)(!1),x=Object(b.a)(O,2),v=x[0],g=x[1],y=Object(n.useState)(),S=Object(b.a)(y,2),C=S[0],I=S[1],P=Object(n.useState)(""),D=Object(b.a)(P,2),q=D[0],U=D[1],F=Object(n.useState)(q),A=Object(b.a)(F,2),L=(A[0],A[1]),z=Object(n.useState)(),B=Object(b.a)(z,2),H=B[0],G=B[1],_=function(){u((function(e){return!e}))},M=function(e,t){I(e),m(t)},J=function(){return m(!1)},W=function(e,t){g(!0),G(e),U(t),L(t)};return Object(p.jsxs)("div",{className:"col-md-9 col-lg-10 px-0",children:[Object(p.jsxs)("div",{className:"referrals",children:[Object(p.jsx)(N,{toggleShowNewReferral:_,showNewReferral:d,currentEncounter:c,sendNotificationUU:a,profileName:s}),d?Object(p.jsx)(k,{onCreate:function(e){t(e),_()},toggleShowNewReferral:_}):null,Object(p.jsxs)("div",{className:"referralList",children:[Object(p.jsxs)("div",{className:"h5 py-3",children:["This encounter has"," ",r.length>1?r.length+" referrals.":1===r.length?" 1 referral.":" no referrals."]}),r.length>0?Object(p.jsxs)("table",{className:"table table-hover",children:[Object(p.jsx)("thead",{children:Object(p.jsxs)("tr",{children:[Object(p.jsx)("th",{children:"DATE SENT"}),Object(p.jsx)("th",{children:"STATUS"}),Object(p.jsx)("th",{children:"SERVICE TYPE"}),Object(p.jsx)("th",{children:"RECEIPIENT"}),Object(p.jsx)("th",{children:"EXPAND"})]})}),Object(p.jsx)("tbody",{children:r.map((function(e,t){return Object(p.jsx)(w,{referral:e,showFhirSource:M,editReferralStatus:W},t)}))})]}):null]})]}),Object(p.jsxs)(R.a,{id:"fhirSource",size:"lg",show:f,onHide:J,children:[Object(p.jsx)(R.a.Header,{className:"bg-light",closeButton:!0,children:Object(p.jsxs)(R.a.Title,{children:[null===C||void 0===C?void 0:C.resourceType," : ",null===C||void 0===C?void 0:C.id]})}),Object(p.jsx)(R.a.Body,{children:Object(p.jsx)("pre",{id:"json",children:JSON.stringify(C,void 0,2)})}),Object(p.jsx)(R.a.Footer,{children:Object(p.jsx)(T.a,{variant:"warning",onClick:J,children:"Close"})})]}),Object(p.jsx)(E,{showReferralStatus:v,currentReferralStatus:q,closeReferralStatusEdit:function(e){g(!1),null!=e&&(console.log("new status: ",e.value,e.rejectReason),i(H,e))},profileName:"Logica"})]})},P={name:"Epic",defaultPatient:{firstName:"Calvin",lastName:"Ccm",gender:"Male",dob:"01/01/1990",mrn:"203724",fhirId:"e4ikKcC2Rp3EsZQh8Ac6C5A3",uuid:"b5318891-3dc8-426a-af50-531e106ad1a1"},defaultProvider:{firstName:"Case",lastName:"Manager",fhirId:"eaToFIkaJ32mO4K002q3BLw3",uuid:"94e5f7ee-1425-42bc-8833-3474b687b125",groupId:"bf4aa373-81eb-4da5-9980-2d3e51c57b3c",networkId:"145ca925-ba86-490d-b404-35f4fe5ada66"},defaultEncounter:"eEDcHpsgsD0Pv4Ih8HnfOxA3",defaultDocumentReference:"e1.cnazaNgltIElLYGLL4Sg3",defaultBaseUrl:"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4",defaultNotificationUrl:"https://fhir-crn.uniteustraining.com/rick/FhirNotificationWebService",accessToken:"e2a4575581b3f57203e182b0b1f3dcea479baecd31bef125cc57f6dd4b8905ac"},D={name:"Epic2",defaultPatient:{firstName:"Beverly",lastName:"Ccm",gender:"Female",dob:"01/01/1940",mrn:"203722",fhirId:"egHmZUd91rLItB1AqGV49Pg3",uuid:"b5318891-3dc8-426a-af50-531e106ad1a1"},defaultProvider:{firstName:"Case",lastName:"Manager",fhirId:"eaToFIkaJ32mO4K002q3BLw3",uuid:"94e5f7ee-1425-42bc-8833-3474b687b125",groupId:"bf4aa373-81eb-4da5-9980-2d3e51c57b3c",networkId:"145ca925-ba86-490d-b404-35f4fe5ada66"},defaultEncounter:"eFBT3k94CLm3fCPMNlKH2DQ3",defaultDocumentReference:"e.-1q0eXQDEZ.9mNdXwVjYA3",defaultBaseUrl:"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4",defaultNotificationUrl:"https://fhir-crn.uniteustraining.com/rick/FhirNotificationWebService",accessToken:"e2a4575581b3f57203e182b0b1f3dcea479baecd31bef125cc57f6dd4b8905ac"},q={name:"Logica",defaultPatient:{firstName:"Beverly",lastName:"Ccm",gender:"Female",dob:"01/01/1940",mrn:"203722",fhirId:"14730",uuid:"b5318891-3dc8-426a-af50-531e106ad1a1"},defaultProvider:{firstName:"Demo",lastName:"Provider",fhirId:"14734",uuid:"94e5f7ee-1425-42bc-8833-3474b687b125",groupId:"bf4aa373-81eb-4da5-9980-2d3e51c57b3c",networkId:"145ca925-ba86-490d-b404-35f4fe5ada66"},defaultEncounter:"14732",defaultDocumentReference:"14740",defaultBaseUrl:"https://api.logicahealth.org/uufhircrn/open",defaultNotificationUrl:"https://fhir-crn.uniteustraining.com/rick/FhirNotificationWebService",accessToken:""};var U=function(){var e=P,t=e.name,r=Object(n.useState)(t),c=Object(b.a)(r,2),a=c[0],s=c[1],l=Object(n.useState)(e.defaultPatient),j=Object(b.a)(l,2),h=j[0],f=j[1],m=Object(n.useState)(e.defaultProvider),O=Object(b.a)(m,2),v=O[0],N=O[1],y=Object(n.useState)(e.defaultEncounter),k=Object(b.a)(y,2),S=k[0],C=k[1],w=Object(n.useState)(e.access_token),R=Object(b.a)(w,2),T=R[0],E=R[1],U=Object(n.useState)(e.defaultBaseUrl),F=Object(b.a)(U,2),A=F[0],L=F[1],z=Object(n.useState)(e.defaultNotificationUrl),B=Object(b.a)(z,2),H=B[0],G=B[1],_=Object(n.useState)([]),M=Object(b.a)(_,2),J=M[0],W=M[1],K=Object(n.useState)([]),V=Object(b.a)(K,2),Y=V[0],Q=V[1],X=Object(n.useState)(""),Z=Object(b.a)(X,2),$=Z[0],ee=Z[1],te=Object(n.useState)("Retrieving FHIR resources ... "),re=Object(b.a)(te,2),ne=re[0],ce=re[1],ae=Object(n.useState)(!0),se=Object(b.a)(ae,2),ie=se[0],oe=se[1],le=Object(n.useState)("0%"),de=Object(b.a)(le,2),ue=de[0],be=de[1],je=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:be("0%"),oe(!0),console.log("Switch to profile: ",t),s(t),e.t0=t,e.next="Logica"===e.t0?7:"Epic2"===e.t0?9:11;break;case 7:return r=q,e.abrupt("break",12);case 9:return r=D,e.abrupt("break",12);case 11:r=P;case 12:if(f(r.defaultPatient),N(r.defaultProvider),L(r.defaultBaseUrl),G(r.defaultNotificationUrl),"Logica"!==r.name){e.next=20;break}E(r.accessToken),e.next=24;break;case 20:return e.next=22,Ce();case 22:n=e.sent,E(n);case 24:oe(!1),be("0%");case 26:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=Object(u.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(h.fhirId,A);case 2:if(!((null===(t=e.sent)||void 0===t?void 0:t.length)>0)){e.next=6;break}return e.next=6,Ne(t[0].resource.id,A);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n,c,a,s,i,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be("0%"),oe(!0),console.log("create referral: ",t),r=(new Date).toISOString(),n=A+"/ServiceRequest",c={resourceType:"ServiceRequest",status:"active",intent:"plan",category:[{coding:[{system:"http://snomed.info/sct",code:"307835004",display:"Referral by service"}],text:"Referral by service"}],priority:"routine",subject:{reference:"Patient/".concat(h.fhirId),display:h.lastName+", "+h.firstName},encounter:{reference:"Encounter/".concat(S)},authoredOn:r,requester:[{reference:"Practitioner/".concat(v.fhirId),display:v.firstName+" "+v.lastName}]},t.attachDocument&&$.length>0&&(c.supportingInfo=[{reference:"DocumentReference/".concat($)}]),e.next=9,fetch(n,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 9:return a=e.sent,e.next=12,a.json();case 12:return s=e.sent,i=s.id,console.log("server request id: ",i),n=A+"/Task",c={resourceType:"Task",basedOn:[{reference:"ServiceRequest/".concat(i)}],status:"requested",intent:"plan",priority:"routine",for:{reference:"Patient/".concat(h.fhirId),display:h.lastName+", "+h.firstName},encounter:{reference:"Encounter/".concat(S)},authoredOn:r,lastModified:r,requester:[{reference:"Practitioner/".concat(v.fhirId),display:v.firstName+" "+v.lastName}],owner:{reference:"Organization/".concat(t.referredToGroupIds.value),display:t.referredToGroupIds.text}},be("5%"),e.next=20,fetch(n,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 20:return a=e.sent,e.next=23,a.json();case 23:return s=e.sent,l=s.id,console.log("Task id: ",l),n=A+"/Communication",c={resourceType:"Communication",basedOn:[{reference:"ServiceRequest/".concat(i)}],partOf:[{reference:"Task/".concat(l)}],status:"in-progress",subject:{reference:"Patient/".concat(h.fhirId),display:h.lastName+", "+h.firstName},encounter:{reference:"Encounter/".concat(S)},sent:r,recipient:[{reference:"Organization/".concat(t.referredToGroupIds.value),display:t.referredToGroupIds.text}],sender:{reference:"Practitioner/".concat(v.fhirId),display:v.firstName+" "+v.lastName}},t.description.length>0&&(c.payload=[{contentString:t.description}]),t.attachDocument&&$.length>0&&(c.payload=[].concat(Object(o.a)(c.payload),[{contentReference:{reference:"DocumentReference/".concat($)}}])),e.next=32,fetch(n,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 32:return a=e.sent,e.next=35,a.json();case 35:return s=e.sent,u=s.id,console.log("Communication id: ",u),e.next=40,ye();case 40:be("100%"),oe(!1);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=function(){var e=Object(u.a)(d.a.mark((function e(){var t,r,n,c,a,s,i,o,l,u,b,j,p,h,f,m,O,x,v,g,N,y,k,C,w=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:S,r=w.length>1&&void 0!==w[1]?w[1]:A,be("10%"),n=r+"/Task?encounter="+t+"&_include=Task%3Apatient&_include=Task%3Aencounter&_include=Task%3Arequester&_include=Task%3Abased-on&_include=Task%3Aowner%3AOrganization",e.next=6,fetch(n,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===T||void 0===T?void 0:T.length)>0?"bearer "+T:""}});case 6:return c=e.sent,e.next=9,c.json();case 9:if(a=e.sent,s=0===a.total?[]:a.entry){e.next=13;break}return e.abrupt("return",[]);case 13:console.log("Task bundle received: ",s),i=[],s.forEach((function(e,t){if("Task"===e.resource.resourceType){var r={id:"Task/"+e.resource.id,Task:e};i.push(r)}})),i.forEach((function(e,t){var r,n,c,a,i=null===e||void 0===e||null===(r=e.Task)||void 0===r?void 0:r.resource;if(i){var o=null===(n=i.for)||void 0===n?void 0:n.reference,l=i.basedOn[0].reference,d=null===(c=i.requester)||void 0===c?void 0:c.reference,u=null===(a=i.owner)||void 0===a?void 0:a.reference;s.forEach((function(t,r){var n=t.resource.id;switch(t.resource.resourceType){case"ServiceRequest":l==="ServiceRequest/".concat(n)&&(e.ServiceRequest=t);break;case"Patient":o==="Patient/".concat(n)&&(e.Patient=t);break;case"Organization":u==="Organization/".concat(n)&&(e.Organization=t);break;case"Practitioner":d==="Practitioner/".concat(n)&&(e.Practitioner=t)}}))}})),be("40%"),o=0,l=i;case 19:if(!(o<l.length)){e.next=29;break}return j=l[o],p=null===j||void 0===j||null===(u=j.Task)||void 0===u||null===(b=u.resource)||void 0===b?void 0:b.id,e.next=24,Oe(p);case 24:h=e.sent,j.Communication=h.entry;case 26:o++,e.next=19;break;case 29:be("70%"),f=0,m=i;case 31:if(!(f<m.length)){e.next=40;break}return O=m[f],e.next=35,xe(O);case 35:(null===(x=e.sent)||void 0===x?void 0:x.length)>0&&(O.DocumentReference=x,ee(O.DocumentReference[0].id),console.log("documentReference",O.DocumentReference),console.log("sampleDocumentReference",$));case 37:f++,e.next=31;break;case 40:be("95%"),v=0,g=i;case 42:if(!(v<g.length)){e.next=52;break}if(y=g[v],!((null===(N=y.DocumentReference)||void 0===N?void 0:N.length)>0)){e.next=49;break}return e.next=47,ve(y.DocumentReference);case 47:(null===(k=e.sent)||void 0===k?void 0:k.length)>0&&(y.Binary=k);case 49:v++,e.next=42;break;case 52:return e.next=54,ge();case 54:return(null===(C=e.sent)||void 0===C?void 0:C.length)>0&&i.forEach((function(e,t){e.Consent=C})),console.log("referral list",i),i.sort((function(e,t){var r=new Date(e.ServiceRequest.resource.authoredOn).getTime();return new Date(t.ServiceRequest.resource.authoredOn).getTime()-r})),be("100%"),e.abrupt("return",i);case 60:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(u.a)(d.a.mark((function e(){var t,r,n,c,s,i,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:h.fhirId,r=o.length>1&&void 0!==o[1]?o[1]:A,n=r+"/Encounter?patient="+t,e.next=5,fetch(n,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===T||void 0===T?void 0:T.length)>0&&"Logica"!==a?"bearer "+T:""}});case 5:return c=e.sent,e.next=8,c.json();case 8:return s=e.sent,(i=s.total>0?s.entry:[]).sort((function(e,t){var r=new Date(e.resource.period.start).getTime();return new Date(t.resource.period.start).getTime()-r})),console.log("encounter",i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=A+"/Communication?part-of="+t,e.next=3,fetch(r,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===T||void 0===T?void 0:T.length)>0?"bearer "+T:""}});case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,console.log("communications: ",c),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n,c,a,s,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=[],a=null===t||void 0===t||null===(r=t.ServiceRequest)||void 0===r||null===(n=r.resource)||void 0===n?void 0:n.supportingInfo){e.next=4;break}return e.abrupt("return",c);case 4:s=Object(i.a)(a),e.prev=5,s.s();case 7:if((o=s.n()).done){e.next=20;break}return l=o.value,u=A+"/"+l.reference,e.next=12,fetch(u,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===T||void 0===T?void 0:T.length)>0?"bearer "+T:""}});case 12:return b=e.sent,e.next=15,b.json();case 15:j=e.sent,console.log("documentReference: ",j),"DocumentReference"===(null===j||void 0===j?void 0:j.resourceType)&&c.push(j);case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),s.e(e.t0);case 25:return e.prev=25,s.f(),e.finish(25);case 28:return e.abrupt("return",c);case 29:case"end":return e.stop()}}),e,null,[[5,22,25,28]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(u.a)(d.a.mark((function e(t){var r,n,c,a,s,o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],t){e.next=3;break}return e.abrupt("return",r);case 3:n=Object(i.a)(t),e.prev=4,n.s();case 6:if((c=n.n()).done){e.next=18;break}return o=c.value,l=A+"/"+(null===(a=o.content[0])||void 0===a||null===(s=a.attachment)||void 0===s?void 0:s.url),e.next=11,fetch(l,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/fhir+json",Authorization:(null===T||void 0===T?void 0:T.length)>0?"bearer "+T:""}});case 11:return u=e.sent,e.next=14,u.json();case 14:"Binary"===(null===(b=e.sent)||void 0===b?void 0:b.resourceType)&&r.push(b);case 16:e.next=6;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(4),n.e(e.t0);case 23:return e.prev=23,n.f(),e.finish(23);case 26:return e.abrupt("return",r);case 27:case"end":return e.stop()}}),e,null,[[4,20,23,26]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(u.a)(d.a.mark((function e(){var t,r,n,c,s,i,o=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:h.fhirId,r=o.length>1&&void 0!==o[1]?o[1]:"Logica"===a?"64292-6":"http://loinc.org|64292-6",n=o.length>2&&void 0!==o[2]?o[2]:"active",c="".concat(A,"/Consent?patient=").concat(t,"&category=").concat(r,"&status=").concat(n),e.next=6,fetch(c,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json",Authorization:(null===T||void 0===T?void 0:T.length)>0?"bearer "+T:""}});case 6:return s=e.sent,e.next=9,s.json();case 9:return i=e.sent,console.log("consent: ",i),e.abrupt("return",i.entry);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(u.a)(d.a.mark((function e(t,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be("0%"),oe(!0),C(t),e.next=5,ye(t,r);case 5:return oe(!1),be("0%"),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ye=function(){var e=Object(u.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe(t,r);case 2:n=e.sent,W(n);case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ke=function(){var e=Object(u.a)(d.a.mark((function e(t,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return be("0%"),oe(!0),e.next=4,me(t,r);case 4:return n=e.sent,Q(n),oe(!1),be("0%"),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Se=function(){var e=Object(u.a)(d.a.mark((function e(){var t,r,n,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=H,r={resourceType:"Bundle",type:"Event",entry:[{fullUrl:A+"/Encounter/"+S}]},e.next=4,fetch(t,{method:"POST",headers:{"Content-type":"application/json","x-api-key":"sfsdfddfdsfsdfs32342343"},body:JSON.stringify(r)});case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,console.log("notification response: ",c),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(u.a)(d.a.mark((function e(){var t,r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://5yhugddpmk.execute-api.us-east-1.amazonaws.com/rick/mockapi/authentication/token",e.next=3,fetch("https://5yhugddpmk.execute-api.us-east-1.amazonaws.com/rick/mockapi/authentication/token",{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json","x-api-key":"sfsdfddfdsfsdfs32342343"},body:JSON.stringify({privateKey:null})});case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,n=r.body.access_token,console.log("access token ",n),e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(u.a)(d.a.mark((function e(t,r){var n,c,s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("new status: ",r),be("0%"),ce("Updating Task Status ..."),oe(!0),n="https://5yhugddpmk.execute-api.us-east-1.amazonaws.com/rick/mockapi/request/read",e.next=7,fetch(n,{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json","x-api-key":"sfsdfddfdsfsdfs32342343"},body:JSON.stringify({baseUrl:A,resourceType:"Task",resourceId:t})});case 7:return c=e.sent,e.next=10,c.json();case 10:return s=e.sent,i=s.response.body,o=s.response.headers,l=o["e-tag"][0],console.log("task: ",i),console.log("headers",o),be("5%"),i.status=r.value,u=Re(r.rejectReason.reason.text),"rejected"===r.value&&(i.statusReason={coding:[{system:"Logica"===a?"HTTPS://UNITEUS.COM/IO/STRUCTUREDEFINITION/STATUS-REASON":"urn:oid:1.2.840.114350.1.13.0.1.7.4.698084.34025",code:u.code,display:u.display}],text:"".concat(r.rejectReason.reason.value,". ").concat(r.rejectReason.note)}),console.log("new task: ",i),n="https://5yhugddpmk.execute-api.us-east-1.amazonaws.com/rick/mockapi/request/update",e.next=24,fetch(n,{method:"POST",headers:{"Content-type":"application/json",Accept:"application/json","x-api-key":"sfsdfddfdsfsdfs32342343"},body:JSON.stringify({baseUrl:A,resourceType:"Task",resourceId:t,etag:l,resource:i})});case 24:return c=e.sent,be("10%"),ce("Retrieving FHIR Resources ..."),e.next=29,ye(S,A);case 29:return oe(!1),be("0%"),e.abrupt("return");case 32:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),Re=function(e){switch(e){case"Not Eligible":return{system:"urn:oid:1.2.840.114350.1.13.0.1.7.4.698084.34025",code:"104",display:"Patient does not meet the level of care required for admission"};case"No Capacity":return{system:"urn:oid:1.2.840.114350.1.13.0.1.7.4.698084.34025",code:"101",display:"Facility Full"};case"Do Not Provide Service":return{system:"urn:oid:1.2.840.114350.1.13.0.1.7.4.698084.34025",code:"103",display:"Facility cannot provide for patient's needs"};case"Duplicate":case"Unable to Contact Client":case"Other":default:return{system:"urn:oid:1.2.840.114350.1.13.0.1.7.4.698084.34025",code:"99",display:"Other (Comment)"}}};return Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}})()(t)}),[]),Object(n.useEffect)((function(){(function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[T]),Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(x,{patient:h,provider:v,profileName:a,switchProfile:je}),Object(p.jsxs)("div",{className:ie?"toast bg-warning text-secondary show":"toast",role:"alert","aria-live":"assertive","aria-atomic":"true",id:"messageToast",children:[Object(p.jsx)("div",{className:"toast-header",children:Object(p.jsx)("strong",{className:"me-auto",children:"Please Wait ..."})}),Object(p.jsxs)("div",{className:"toast-body",children:[ne,Object(p.jsx)("div",{className:"spinner-border text-warning",role:"status",children:Object(p.jsx)("span",{className:"visually-hidden",children:"..."})}),Object(p.jsx)("div",{className:"progress my-2",children:Object(p.jsx)("div",{className:"progress-bar bg-warning progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:ue},"aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100"})})]})]}),Object(p.jsx)("div",{className:"container-fluid",children:Object(p.jsxs)("div",{className:"row mt-1 mx-0",children:[Object(p.jsx)(g,{encounterList:Y,currentEncounter:S,changeCurrentEncounter:Ne,refreshEncounters:ke}),Object(p.jsx)(I,{onCreate:he,referralList:J,currentEncounter:S,sendNotificationUU:Se,profileName:a,updateReferralStatus:we})]})})]})},F=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,44)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};r(39);s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(U,{})}),document.getElementById("root")),F()}},[[40,1,2]]]);
//# sourceMappingURL=main.272eb9ae.chunk.js.map