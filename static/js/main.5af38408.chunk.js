(this["webpackJsonpehr-mock"]=this["webpackJsonpehr-mock"]||[]).push([[0],{14:function(e,t,r){},16:function(e,t,r){},19:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r.n(n),a=r(8),s=r.n(a),o=(r(14),r(3)),i=r.n(o),l=r(6),d=r(4),u=(r(16),r(5)),j=r(1),f=function(e){var t=e.patient;return Object(j.jsxs)("div",{className:"p-2",children:[Object(j.jsxs)("h4",{style:{color:"yellow"},children:[Object(j.jsx)(u.c,{})," ",t.firstName," ",t.lastName]}),Object(j.jsxs)("h6",{children:[Object(j.jsx)("span",{className:"badge badge-light",children:"DOB"})," : ",t.dob,Object(j.jsx)("span",{children:"    "}),Object(j.jsx)("span",{className:"badge badge-light",children:"Gender"})," : ",t.gender]}),Object(j.jsxs)("h6",{children:[Object(j.jsx)("span",{className:"badge badge-light",children:"MRN"})," : ",t.mrn]})]})},b=function(e){var t=e.provider;return Object(j.jsxs)("div",{className:"p-2",children:[Object(j.jsxs)("h4",{style:{color:"HotPink"},children:[t.firstName," ",t.lastName," ",Object(j.jsx)(u.d,{})]}),Object(j.jsxs)("h6",{children:[Object(j.jsx)("span",{className:"badge badge-light",children:"FHIR ID"})," : ",t.fhirId]}),Object(j.jsxs)("h6",{children:[Object(j.jsx)("span",{className:"badge badge-light",children:"UUID "})," : ",t.uuid]})]})},h=function(e){var t=e.title,r=e.patient,n=e.provider;return Object(j.jsx)("header",{children:Object(j.jsx)("div",{id:"navbarTop",children:Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-lg-6 col-md-12 order-lg-2",children:[Object(j.jsxs)("h2",{className:"p-4",children:[Object(j.jsx)(u.b,{style:{color:"#d60c05ee"}})," ",t]}),Object(j.jsx)("h6",{className:"text-info",children:"[ Hosted on Logica Health FHIR server ]"})]}),Object(j.jsx)("div",{className:"col-lg-3 col-md-6 order-lg-1",children:Object(j.jsx)(f,{patient:r})}),Object(j.jsx)("div",{className:"col-lg-3 col-md-6 order-lg-3",children:Object(j.jsx)(b,{provider:n})})]})})})};h.defaultProps={title:"Mock EHR : : Social Care Referrals"};var p=h,v=r(9),m=function(e){var t=e.encounterList,r=e.currentEncounter,n=void 0===r?"smart-2":r,c=e.changeCurrentEncounter,a=e.refreshEncounters;return Object(j.jsxs)("div",{className:"encounter col-md-3 col-lg-2 mx-0 px-0",children:[Object(j.jsxs)("div",{className:"btn btn-default btn-lg btn-block table-hover mx-0",onClick:function(){console.log("Retrieving patient's encounters"),a()},children:["All Encounters",Object(j.jsx)("div",{className:"badge badge-primary mx-2",children:t.length}),Object(j.jsx)(v.a,{})]}),Object(j.jsx)("dl",{children:t.map((function(e,t){var r=e.resource.id===n,a=r?"row table-hover m-0 px-2 selected":"row table-hover m-0 px-2",s=r?"visible":"invisible";return Object(j.jsxs)("div",{className:a,onClick:function(){return t=e.resource.id,void c(t);var t},children:[Object(j.jsx)("dt",{children:Object(j.jsxs)("a",{href:e.fullUrl,children:[e.resource.id," ",Object(j.jsx)(u.a,{className:s})]})}),Object(j.jsxs)("dd",{children:[Object(j.jsx)("div",{children:e.resource.period.start.split("T")[0]}),Object(j.jsxs)("div",{children:[" ",e.resource.type[0].text]})]})]},t)}))})]})},O=function(e){var t=e.toggleShowNewReferral,r=e.showNewReferral,n=e.currentEncounter,c=e.sendNotificationUU,a=function(){t()};return Object(j.jsxs)("div",{className:"encounterSummary",children:[Object(j.jsxs)("div",{className:"h4 pt-2 d-inline-block",children:["Current Encounter: ",n]}),Object(j.jsx)("div",{className:"btn btn-primary d-inline float-right",onClick:function(){console.log("sending an encounter notification to Unite Us..."),c()},children:"Send Notification to Unite Us"}),r?Object(j.jsx)("div",{className:"btn btn-warning d-inline float-right",onClick:a,children:"Cancel New Referral"}):Object(j.jsx)("div",{className:"btn btn-primary d-inline float-right",onClick:a,children:"Create new referral"})]})},x=function(e){var t=e.onCreate,r=e.toggleShowNewReferral,c=Object(n.useState)(""),a=Object(d.a)(c,2),s=a[0],o=a[1],i=Object(n.useState)(""),l=Object(d.a)(i,2),u=l[0],f=l[1],b=Object(n.useState)(""),h=Object(d.a)(b,2),p=h[0],v=h[1],m=Object(n.useState)(""),O=Object(d.a)(m,2),x=O[0],g=O[1],N=Object(n.useState)(""),y=Object(d.a)(N,2),w=y[0],S=y[1],T=function(e){e.preventDefault(),x?(t({serviceType:x,description:w,referredToGroupIds:s,referredFromGroupId:u,networkId:p}),o(""),f("demo-hospital"),v("demo-network"),g(""),S("")):alert("Please select a service for the referral!")};return Object(j.jsx)("div",{className:"newReferral",children:Object(j.jsxs)("form",{className:"add-form",onSubmit:T,children:[Object(j.jsxs)("div",{className:"row",children:[Object(j.jsxs)("div",{className:"col-lg-6",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{className:"col-form-label",children:"SENDING NETWORK"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{className:"form-control",type:"text",placeholder:"Healthy Demo Network",readOnly:!0,value:p,onChange:function(e){return v(e.target.value)}})})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{className:"col-form-label",children:"SENDER"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{className:"form-control",type:"text",readOnly:!0,placeholder:"Local Hospital Center",value:u,onChange:function(e){return f(e.target.value)}})})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{className:"col-form-label",children:"SERVICE TYPE"}),Object(j.jsx)("div",{children:Object(j.jsxs)("select",{className:"form-control",value:x.value,onChange:function(e){return g({value:e.target.value,text:e.target.options[e.target.selectedIndex].text})},children:[Object(j.jsx)("option",{children:"Select a service ..."}),Object(j.jsx)("option",{value:"e281c5da-5fbd-41ea-a32e-6efc32f0a156",children:"Clothing and Household Goods"}),Object(j.jsx)("option",{value:"f020d616-5016-4fb7-9fad-91d8d99cd7a1",children:"Emergency Food"}),Object(j.jsx)("option",{value:"f6760383-7fc4-442b-b686-fc5055bfec06",children:"Emergency Housing"}),Object(j.jsx)("option",{value:"ba3eb996-9647-453f-abe4-c04dc84c319e",children:"Food Assistance"}),Object(j.jsx)("option",{value:"5c7dec03-e340-4b48-8d4b-f24af7410a3a",children:"Housing and Shelter"}),Object(j.jsx)("option",{value:"eceb120f-4888-4c42-957f-c90fd5582f83",children:"Transportation"})]})})]})]}),Object(j.jsxs)("div",{className:"col-lg-6",children:[Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{className:"col-form-label",children:"RECEIVING NETWORK"}),Object(j.jsx)("div",{children:Object(j.jsx)("input",{className:"form-control",type:"text",readOnly:!0,placeholder:"Healthy Demo Network",value:p,onChange:function(e){return v(e.target.value)}})})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{className:"col-form-label",children:"RECEIPIENT"}),Object(j.jsx)("div",{children:Object(j.jsxs)("select",{className:"form-control",value:s.value,onChange:function(e){return o({value:e.target.value,text:e.target.options[e.target.selectedIndex].text})},children:[Object(j.jsx)("option",{children:"Select an organization ..."}),Object(j.jsx)("option",{value:"b8835025-bf3f-455f-9b1d-5efda6772b98",children:"BusRides Sustainable Transportation Act"}),Object(j.jsx)("option",{value:"ebea1516-6343-4f76-980f-a637e580cfd3",children:"Housing California"}),Object(j.jsx)("option",{value:"3491714a-aa7e-4a9c-a4d7-c8fe7c6b0bc0",children:"River City Food Bank"}),Object(j.jsx)("option",{value:"9dd692cb-4eb3-46cb-a178-ab9eda2c83f6",children:"St. Mary's Shelter"}),Object(j.jsx)("option",{value:"8d18165d-0c32-4f82-b331-ef537f4382aa",children:"The Food Pantries for the Capital District"})]})})]}),Object(j.jsxs)("div",{className:"form-group",children:[Object(j.jsx)("label",{className:"col-form-label",children:"DESCRIPTION"}),Object(j.jsx)("div",{children:Object(j.jsx)("textarea",{className:"form-control",rows:"3",cols:"50",placeholder:"Enter a description for the referral",value:w,onChange:function(e){return S(e.target.value)}})})]})]})]}),Object(j.jsxs)("div",{className:"row my-2 float-right",children:[Object(j.jsx)("input",{value:"Cancel",className:"btn btn-warning",onClick:function(){r()},readOnly:!0}),Object(j.jsx)("input",{value:"Submit",className:"btn btn-primary",onClick:T,readOnly:!0})]})]})})};var g=function(e){var t=e.referral;return Object(j.jsxs)("div",{className:"row table-hover px-3",children:[Object(j.jsx)("div",{className:"col-lg-6",children:Object(j.jsxs)("a",{href:t.ServiceRequest.fullUrl,children:[t.ServiceRequest.resource.resourceType," : ",t.ServiceRequest.resource.id]})}),Object(j.jsx)("div",{className:"col-lg-6",children:Object(j.jsxs)("a",{href:t.Task.fullUrl,children:[t.Task.resource.resourceType," : ",t.Task.resource.id]})})]})};var N=function(e){var t=e.onCreate,r=e.referralList,c=e.currentEncounter,a=e.sendNotificationUU,s=Object(n.useState)(!1),o=Object(d.a)(s,2),i=o[0],l=o[1],u=function(){l((function(e){return!e}))};return Object(j.jsx)("div",{className:"col-md-9 col-lg-10 px-0",children:Object(j.jsxs)("div",{className:"referrals",children:[Object(j.jsx)(O,{toggleShowNewReferral:u,showNewReferral:i,currentEncounter:c,sendNotificationUU:a}),i?Object(j.jsx)(x,{onCreate:function(e){t(e),u()},toggleShowNewReferral:u}):null,Object(j.jsxs)("div",{className:"referralList",children:[Object(j.jsxs)("div",{className:"h5 py-3",children:["This encounter has ",r.length>1?r.length+" referrals.":1===r.length?" 1 referral.":" no referrals."]}),r.length>0?r.map((function(e,t){return Object(j.jsx)(g,{referral:e},t)})):null]})]})})};var y=function(){var e={firstName:"Aaron",lastName:"Alexis",gender:"Male",dob:"10/26/1989",mrn:"smart-9995679",fhirId:"e63wRTbPfr1p8UW81d8Seiw3",uuid:"74216479-7594-413c-9835-9f00a51e5686"},t={firstName:"Demo",lastName:"Provider",fhirId:"smart-Practitioner-71482713",uuid:"94e5f7ee-1425-42bc-8833-3474b687b125",groupId:"bf4aa373-81eb-4da5-9980-2d3e51c57b3c",networkId:"145ca925-ba86-490d-b404-35f4fe5ada66"},r="https://api.logicahealth.org/uufhircrn/open",c=Object(n.useState)([]),a=Object(d.a)(c,2),s=a[0],o=a[1],u=Object(n.useState)([]),f=Object(d.a)(u,2),b=f[0],h=f[1],v=Object(n.useState)(e),O=Object(d.a)(v,2),x=O[0],g=O[1],y=Object(n.useState)(t),w=Object(d.a)(y,2),S=w[0],T=w[1],k=Object(n.useState)("enZf6GWN2rMGQWF1rqqDgNg3"),R=Object(d.a)(k,2),C=R[0],E=R[1],I=function(){var e=Object(l.a)(i.a.mark((function e(t){var r,n,c,a,s,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("create referral: ",t),r=(new Date).toISOString(),n="https://api.logicahealth.org/uufhircrn/open/ServiceRequest",c={resourceType:"ServiceRequest",status:"active",intent:"plan",category:[{coding:[{system:"http://snomed.info/sct",code:"307835004",display:"Referral by service (finding)"}],text:"Referral by service"}],priority:"routine",subject:{reference:"Patient/".concat(x.fhirId),display:x.firstName+" "+x.lastName},encounter:{reference:"Encounter/".concat(C),display:"Hospital Admission"},authoredOn:r,requester:[{reference:"Practitioner/".concat(S.fhirId),display:S.firstName+" "+S.lastName}],orderDetail:{text:t.serviceType.text,coding:[{system:"Unite Us",code:t.serviceType.value,display:t.serviceType.text}]}},e.next=6,fetch(n,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 6:return a=e.sent,e.next=9,a.json();case 9:return s=e.sent,console.log("new referral: ",s),l=s.id,console.log("server request id: ",l),n="https://api.logicahealth.org/uufhircrn/open/Task",c={resourceType:"Task",basedOn:[{reference:"ServiceRequest/".concat(l)}],status:"requested",intent:"plan",priority:"routine",for:{reference:"Patient/".concat(x.fhirId),display:x.firstName+" "+x.lastName},encounter:{reference:"Encounter/".concat(C),display:"Hospital Admission"},authoredOn:r,lastModified:r,requester:[{reference:"Practitioner/".concat(S.fhirId),display:S.firstName+" "+S.lastName}],description:t.description+"/n referred to : "+t.referredToGroupIds.text+" ["+t.referredToGroupIds.value+"]",owner:{type:"Organization",identifier:{use:"usual",system:"Unite Us",value:t.referredToGroupIds.value},display:t.referredToGroupIds.text}},e.next=17,fetch(n,{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(c)});case 17:return a=e.sent,e.next=20,a.json();case 20:return s=e.sent,console.log("new referral: ",s),l=s.id,console.log("Task id: ",l),e.next=26,U();case 26:s=e.sent,console.log("new referral list: ",s),o(s);case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,c,a,s,o,l,d=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:r,n=d.length>1&&void 0!==d[1]?d[1]:C,c=t+"/Task?encounter="+n+"&_include=Task%3Afor%3APatient&_include=Task%3Aencounter&_include=Task%3Arequester&_include=Task%3Abased-on%3AServiceRequest",e.next=5,fetch(c,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json"}});case 5:return a=e.sent,e.next=8,a.json();case 8:return s=e.sent,(o=0===s.total?[]:s.entry).length>0&&(o=o.filter((function(e){return"ServiceRequest"===e.resource.resourceType||"Task"===e.resource.resourceType}))),l=[],o.forEach((function(e,t){if("ServiceRequest"===e.resource.resourceType){var r={id:"ServiceRequest/"+e.resource.id,ServiceRequest:e};l.push(r)}})),o.forEach((function(e,t){if("Task"===e.resource.resourceType){var r=e.resource.basedOn[0].reference,n=l.find((function(e,t){return e.id===r}));n&&(n.Task=e)}})),console.log("referral list",l),l.sort((function(e,t){var r=new Date(e.ServiceRequest.resource.meta.lastUpdated).getTime();return new Date(t.ServiceRequest.resource.meta.lastUpdated).getTime()-r})),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,c,a,s,o,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:r,n=l.length>1&&void 0!==l[1]?l[1]:x.fhirId,c=t+"/Encounter?patient="+n,e.next=5,fetch(c,{method:"GET",headers:{"Content-type":"application/json",Accept:"application/json"}});case 5:return a=e.sent,e.next=8,a.json();case 8:return s=e.sent,(o=s.total>0?s.entry:[]).sort((function(e,t){var r=new Date(e.resource.period.start).getTime();return new Date(t.resource.period.start).getTime()-r})),console.log("encounter",o),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==C){e.next=2;break}return e.abrupt("return");case 2:return E(t),e.next=5,U(r,t);case 5:return n=e.sent,o(n),e.abrupt("return");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:t=e.sent,o(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(l.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:t=e.sent,h(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4",t={resourceType:"Bundle",type:"Event",entry:[{fullUrl:r+"/Encounter/"+C}]},e.next=4,fetch("https://apporchard.epic.com/interconnect-aocurprd-oauth/api/FHIR/R4",{method:"POST",headers:{"Content-type":"application/json","x-api-key":"sfsdfddfdsfsdfs32342343","Access-Control-Allow-Origin":"*"},body:JSON.stringify(t)});case 4:return n=e.sent,e.next=7,n.json();case 7:return c=e.sent,console.log("notification response: ",c),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){g(e),T(t),E("smart-2"),A(),P();var r=new Date;console.log("now is ",(new Date).toISOString(),r)}),[]),Object(j.jsxs)("div",{className:"App",children:[Object(j.jsx)(p,{patient:x,provider:S}),Object(j.jsxs)("div",{className:"row mt-1 mx-0",children:[Object(j.jsx)(m,{encounterList:b,currentEncounter:C,changeCurrentEncounter:q,refreshEncounters:A}),Object(j.jsx)(N,{onCreate:I,referralList:s,currentEncounter:C,sendNotificationUU:H})]})]})},w=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,20)).then((function(t){var r=t.getCLS,n=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;r(e),n(e),c(e),a(e),s(e)}))};r(18);s.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(y,{})}),document.getElementById("root")),w()}},[[19,1,2]]]);
//# sourceMappingURL=main.5af38408.chunk.js.map